{
    "function_name": "estimate_deterministic_atlas",
    "parameter_groups" : [
        {
            "label" : "Main parameters",
            "name" : "deformation_parameters",
            "tooltip": "This is a tooltip",
            "parameters" : [
                {
                    "name" : "deformation_kernel_width",
                    "tooltip": "This is a tooltip",
                    "type" : "float",
                    "default": 10.0
                },
                {
                    "name" : "deformation_kernel_type",
                    "tooltip": "This is a tooltip",
                    "type" : "selector",
                    "values" : ["torch", "keops"],
                    "default" : "torch"
                },
                {
                    "label" : "Output Directory",
                    "name" : "output_dir",
                    "tooltip": "This is a tooltip",
                    "type" : "directory",
                    "default" : "./output"
                },
                {
                    "name" : "freeze_template",
                    "tooltip": "This is a tooltip",
                    "type" : "toggle",
                    "default" : false
                },
                {
                    "name" : "freeze_control_points",
                    "tooltip": "This is a tooltip",
                    "type" : "toggle",
                    "default" : true
                }
            ]
        },
        {
            "label" : "Dataset",
            "name" : "template",
            "tooltip": "This is a tooltip",
            "multiple" : true,
            "parameters" : [
                {
                    "name" : "deformable_object_type",
                    "tooltip": "This is a tooltip",
                    "type" : "selector",
                    "values" : ["SurfaceMesh", "PolyLine", "PointCloud", "Landmark", "Image"],
                    "default" : "SurfaceMesh"
                },
                {
                    "name" : "kernel_width",
                    "tooltip": "This is a tooltip",
                    "type" : "float",
                    "default": 10.0
                },
                {
                    "name": "kernel_type",
                    "tooltip": "This is a tooltip",
                    "type": "selector",
                    "values": ["torch", "keops"],
                    "default": "torch"
                },
                {
                    "label" : "Template File",
                    "name": "filename",
                    "tooltip": "This is a tooltip",
                    "type": "file"
                },
                {
                    "label" : "Subject Files",
                    "name": "filenames",
                    "tooltip": "This is a tooltip",
                    "type": "files"
                },
                {
                    "name": "attachment_type",
                    "type": "selector",
                    "tooltip": "This is a tooltip",
                    "values": ["Varifold", "Current", "Landmark"],
                    "default": "Varifold"
                },
                {
                    "name" : "noise_std",
                    "tooltip": "This is a tooltip",
                    "type" : "float",
                    "default" : 1.0
                }, 
                {
                    "name" : "dimension",
                    "tooltip": "This is a tooltip",
                    "type" : "selector",
                    "values" : [2,3,"Auto"],
                    "default" : "Auto"
                
                }
            ]
        },
        {
            "label" : "Advanced parameters",
            "name" : "optimization_parameters",
            "tooltip": "This is a tooltip",
            "optional" : true,
            "parameters" : [
                {
                    "name" : "optimization_method_type",
                    "tooltip": "This is a tooltip",
                    "type" : "selector",
                    "values" : ["GradientAscent", "ScipyLBFGS"],
                    "default" : "GradientAscent"
                },
                {
                    "name" : "max_iterations",
                    "tooltip": "This is a tooltip",
                    "type" : "int",
                    "default" : 100
                },
                {
                    "name" : "initial_step_size",
                    "tooltip": "This is a tooltip",
                    "type" : "selector",
                    "values" : [1.0, 0.5, 0.1, 0.05, 0.01, 0.001, 0.0001],
                    "default" : 0.5
                },
                {
                    "name" : "scale_initial_step_size",
                    "tooltip": "This is a tooltip",
                    "type" : "toggle",
                    "default" : true
                },
                {
                    "name" : "convergence_tolerance",
                    "tooltip": "This is a tooltip",
                    "type" : "selector",
                    "values" : [1e-2, 1e-3, 1e-4, 1e-5, 1e-6],
                    "default" : 1e-4
                },
                {
                    "name" : "use_cuda",
                    "tooltip": "This is a tooltip",
                    "type" : "toggle",
                    "default" : false
                },
                {
                    "name" : "downsampling_factor",
                    "tooltip": "This is a tooltip",
                    "type" : "selector",
                    "values" : [1, 2, 3, 4, 5],
                    "default" : 1
                },
                {
                    "name" : "save_every_n_iters",
                    "tooltip": "This is a tooltip",
                    "type" : "selector",
                    "values" : [1, 5, 10, 50, 100, 200, 500],
                    "default" : 100
                },
                {
                    "name" : "use_rk2_for_flow",
                    "tooltip": "This is a tooltip",
                    "type" : "toggle",
                    "default": false
                },
                {
                    "name" : "use_rk2_for_shoot",
                    "tooltip": "This is a tooltip",
                    "type" : "toggle",
                    "default": false
                }
            ]
        }
    ]
}
