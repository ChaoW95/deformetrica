{
    "function_name": "estimate_deterministic_atlas",
    "parameter-groups" : [
        {
            "name" : "deformation_parameters",
            "parameters" : [
                {
                    "name" : "kernel_width",
                    "type" : "number",
                    "default": 10
                },
                {
                    "name" : "kernel_type",
                    "type" : "selector",
                    "values" : ["torch", "keops"],
                    "default" : "torch"
                },
                {
                    "name" : "number_of_time_points",
                    "type" : "slider",
                    "min" : 2,
                    "max": 30,
                    "default" : 11
                }
            ]
        },
        {
            "name" : "template",
            "multiple" : true,
            "parameters" : [
                {
                    "name" : "deformable_object_type",
                    "type" : "selector",
                    "values" : ["SurfaceMesh", "PolyLine", "PointCloud", "Landmark", "Image"],
                    "default" : "SurfaceMesh"
                },
                {
                    "name" : "kernel_width",
                    "type" : "number",
                    "default": 10
                },
                {
                    "name": "kernel_type",
                    "type": "selector",
                    "values": ["torch", "keops"],
                    "default": "torch"
                },
                {
                    "name": "filename",
                    "type": "file"
                },
                {
                    "name": "filenames",
                    "type": "files"
                },
                {
                    "name": "attachment_type",
                    "type": "selector",
                    "values": ["varifold"],
                    "default": "varifold"
                },
                {
                    "name" : "noise_std",
                    "type" : "slider",
                    "scale" : "logarithmic",
                    "min" : 1e-3,
                    "max" : 10.0,
                    "default" : 1
                }, 
                {
                    "name" : "dimension",
                    "type" : "selector",
                    "values" : [2,3],
                    "default" : 3
                
                }
            ]
        },
        {
            "name" : "optimization_parameters",
            "optional" : true,
            "parameters" : [
                {
                    "name" : "optimization_method_type",
                    "type" : "selector",
                    "values" : ["GradientAscent", "ScipyLBFGS"],
                    "default" : "GradientAscent"
                },
                {
                    "name" : "initial_step_size",
                    "type" : "slider",
                    "scale" : "logarithmic",
                    "min" : 1e-10,
                    "max" : 1e5
                },
                {
                    "name" : "convergence_tolerance",
                    "type" : "slider",
                    "scale" : "logarithmic",
                    "min": 1e-6,
                    "max": 1e-2
                },
                {
                    "name" : "freeze_template",
                    "type" : "toggle",
                    "default" : true
                },
                {
                    "name" : "freeze_control_points",
                    "type" : "toggle",
                    "default" : true
                },
                {
                    "name" : "number_of_threads",
                    "type" : "slider",
                    "scale" : "int",
                    "min" : 1,
                    "max" : 72,
                    "default" : 1
                },
                {
                    "name" : "max_iterations",
                    "type" : "slider",
                    "scale" : "int",
                    "min" : 1,
                    "max" : 1000,
                    "default" : 100
                },
                {
                    "name" : "use_cuda",
                    "type" : "toggle",
                    "default" : false
                },
                {
                    "name" : "state_file",
                    "type" : "file",
                    "default" : "pydef_state.p"
                },
                {
                    "name" : "memory_length",
                    "type" : "slider",
                    "scale" : "int",
                    "min" : 1,
                    "max" : 100,
                    "default" : 10
                },
                {
                    "name" : "downsampling_factor",
                    "type" : "selector",
                    "values" : [1,2,3,4,5,6],
                    "default" : 1
                },
                {
                    "name" : "save_every_n_iters",
                    "type" : "selector",
                    "values" : [1, 2, 5, 10, 20, 50, 100, 1000],
                    "default" : 5
                },
                {
                    "name" : "print_every_n_iters",
                    "type" : "selector",
                    "values" : [1, 2, 5, 10, 20, 50],
                    "default" : 1
                },
                {
                    "name" : "use_rk2_for_flow",
                    "type" : "toggle"
                },
                {
                    "name" : "use_rk2_for_shoot",
                    "type" : "toggle"
                },
                {
                    "name" : "scale_initial_step_size",
                    "type" : "toggle",
                    "default" : true
                }
            ]
        }
    ]
}
